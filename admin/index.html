<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Dashboad</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="../css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="../css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  

</head>
<body>
  <nav class="blue lighten-1" role="navigation">
    <div class="nav-wrapper"><a id="logo-container" href="#" class="brand-logo" style="margin-left:55px;">ZDO</a>
      <ul class="right hide-on-med-and-down" style="margin-right:55px;">
        <li><a href="index.html">DASHBOAD</a></li>
		<li><a href="client_list.html">CLIENTS</a></li>
		<li><a href="sales.html">SALES AGENT</a></li>
		<!--<li><a href="report.html">REPORT</a></li>-->
          <li><a href="../index.html">LOGOUT</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
          <li><a href="index.html">DASHBOAD</a></li>
          <li><a href="client_list.html">CLIENTS</a></li>
          <li><a href="sales.html">SALES AGENT</a></li>
          <!--<li><a href="report.html">REPORT</a></li>-->
          <li><a href="../index.html">LOGOUT</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  
  
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
		
		
		<div class="row">			
			<div class="col m12 s12">
				<div class="green darken-1" id="newApp">
					<br>
					<p class="flow-text" style="text-align:center;color:white">NEW APPLICATION <span class="new badge pink accent-1" id="BindnewApp"></span></p>
					<br>
				</div>
			</div>
		</div>
		
		<div class="row">		
			<div class="col m6 s12" id="amendApp">
				<div class="cyan lighten-1" id="">
					<br>
					<p class="flow-text" style="text-align:center;color:white">AMEND <span class="new badge pink accent-1" id="BindamdApp"></span></p>
					<br>
				</div>
			</div>			
			<div class="col m6 s12">
				<div class="deep-orange lighten-1" id="rejectApp">
					<br>
					<p class="flow-text" style="text-align:center;color:white">REJECTED <span class="new badge pink accent-1" id="BindrejApp"></span></p>
					<br>
				</div>
			</div>
            <!--<div class="col m4 s12">
                <div class="orange lighten-2" id="pendApp">
                    <br>
                    <p class="flow-text" style="text-align:center;color:white">PENDING <span class="new badge pink accent-1" id="BindpendApp"></span></p>
                    <br>
                </div>
            </div>-->
		</div>
		
		
		<div class="row">			
			<div class="col m12 s12">
				<div class=" deep-purple lighten-1" id="resubApp">
					<br>
					<p class="flow-text" style="text-align:center;color:white">RE-SUBMISSION<span class="new badge pink accent-1" id="BindReSub"></span></p>
					<br>
				</div>
			</div>
		</div>
    </div>
  </div>

  <div class="container">
	<div class="row">
		<div class="col l7 m12 s12">
			<h3 class="flow-text  blue lighten-1" id="H1" style="height: 45px;text-align: center;color: white;padding-top: 11px;font-size: 25px;">
				TICKETS
			</h3>
            <ul class="collection">
                <li class="collection-item avatar">
                    <br /><span class="title">APPLICANT NAME : <span>DURAI</span></span>
                    <p> 
                        AGENT NAME : <span> SHARATH</span>
                    </p>
                    <a href="#!" class="secondary-content">
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                    </a>
                </li>
                <li class="collection-item avatar">
                    <br /><span class="title">APPLICANT NAME : <span>DURAI</span></span>
                    <p>
                        AGENT NAME : <span> SHARATH</span>
                    </p>
                    <a href="#!" class="secondary-content">
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                    </a>
                </li>
                <li class="collection-item avatar">
                    <br /><span class="title">APPLICANT NAME : <span>DURAI</span></span>
                    <p>
                        AGENT NAME : <span> SHARATH</span>
                    </p>
                    <a href="#!" class="secondary-content">
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                    </a>
                </li>
                <li class="collection-item avatar">
                    <br /><span class="title">APPLICANT NAME : <span>DURAI</span></span>
                    <p>
                        AGENT NAME : <span> SHARATH</span>
                    </p>
                    <a href="#!" class="secondary-content">
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                        <i class="material-icons">grade</i>
                    </a>
                </li>
            </ul>		
		</div>
		
		<div class="col l5 m12 s12">
			<h3 class="flow-text  blue lighten-1" id="H1" style="height: 45px;text-align: center;color: white;padding-top: 11px;font-size: 25px;">
				STATUS
			</h3>
			<div class="grey lighten-3" id="notiPan">
                
                <br />
                <div id="dvChart">
                </div>
                <br />
                <div id="dvLegend" style="margin-left:50px;">
                </div>
                <br />

			</div>
			
		</div>
	</div><br>
  </div>


  
  
  <footer class="page-footer blue lighten-1">
    <div class="container">
		<p class="flow-text" style="text-align:center;color:white;">ZDO</p><br>
    </div>
  </footer>

<script>
	
</script>

  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="../js/materialize.js"></script>
  <script src="../js/init.js"></script>

  <script src="../js/jquery-3.1.1.js"></script>
  <script>
	$(document).ready(function(){
       
	});
  </script>
  


    <!--Chart References-->
    <script type="text/javascript" src="charts/jquery.min.js"></script>
    <script src="charts/excanvas.js" type="text/javascript"></script>
    <script src="charts/Chart.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var user_id = localStorage.getItem('uid');
            //alert(user_id);

            getApplication();



            //chart start
            var pending = "17";
            var approve = "43";
            var amend = "10";
            var reject = "30";
            LoadChart(pending, approve, amend, reject);
            //chart end



            $("#newApp").click(function () {
                var amendAppStatus = "";
                localStorage.setItem('AppStatus', amendAppStatus);
                var rejectAppStatus = "";
                localStorage.setItem('AppStatus', rejectAppStatus);
                var pendAppStatus = "";
                localStorage.setItem('AppStatus', pendAppStatus);
                var resubAppStatus = "";
                localStorage.setItem('AppStatus', resubAppStatus);

                var newAppStatus = "Pending";
                localStorage.setItem('AppStatus', newAppStatus);
                window.location = "new_application_list.html";
            });

            $("#amendApp").click(function () {
                var newAppStatus = "";
                localStorage.setItem('AppStatus', newAppStatus);
                var rejectAppStatus = "";
                localStorage.setItem('AppStatus', rejectAppStatus);
                var pendAppStatus = "";
                localStorage.setItem('AppStatus', pendAppStatus);
                var resubAppStatus = "";
                localStorage.setItem('AppStatus', resubAppStatus);

                var amendAppStatus = "Amend";
                localStorage.setItem('AppStatus', amendAppStatus);
                window.location = "application_list.html";
            });

            $("#rejectApp").click(function () {
                var newAppStatus = "";
                localStorage.setItem('AppStatus', newAppStatus);
                var amendAppStatus = "";
                localStorage.setItem('AppStatus', amendAppStatus);
                var pendAppStatus = "";
                localStorage.setItem('AppStatus', pendAppStatus);
                var resubAppStatus = "";
                localStorage.setItem('AppStatus', resubAppStatus);

                var rejectAppStatus = "Rejected";
                localStorage.setItem('AppStatus', rejectAppStatus);
                window.location = "application_list.html";
            });

            $("#pendApp").click(function () {
                var newAppStatus = "";
                localStorage.setItem('AppStatus', newAppStatus);
                var amendAppStatus = "";
                localStorage.setItem('AppStatus', amendAppStatus);
                var rejectAppStatus = "";
                localStorage.setItem('AppStatus', rejectAppStatus);
                var resubAppStatus = "";
                localStorage.setItem('AppStatus', resubAppStatus);

                var pendAppStatus = "Pending";
                localStorage.setItem('AppStatus', pendAppStatus);
                window.location = "application_list.html";
            });

            $("#resubApp").click(function () {
                var newAppStatus = "";
                localStorage.setItem('AppStatus', newAppStatus);
                var amendAppStatus = "";
                localStorage.setItem('AppStatus', amendAppStatus);
                var rejectAppStatus = "";
                localStorage.setItem('AppStatus', rejectAppStatus);
                var pendAppStatus = "";
                localStorage.setItem('AppStatus', pendAppStatus);

                var resubAppStatus = "resubmit";
                localStorage.setItem('AppStatus', resubAppStatus);
                window.location = "application_list.html";
            });

        });
        </script>

        <script>
            function getApplication() {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "../Functions.aspx/getApplicationData",
                    data: "{}",
                    dataType: "json",
                    success: function (data) {
                        $("#BindnewApp").empty();
                        $("#BindamdApp").empty();
                        $("#BindrejApp").empty();
                        $("#BindpendApp").empty();
                        $("#BindReSub").empty();
                        var newApp = 0;
                        var amd = 0;
                        var rej = 0;
                        var pend = 0;
                        var resub = 0;
                        for (var i = 0; i < data.d.length; i++) {
                            if (data.d[i].admision_status == "Pending" && data.d[i].appSave == "Complete") {
                                newApp++;
                            }
                             if (data.d[i].admision_status == "Amend") {
                                amd++;
                            }
                            if (data.d[i].admision_status == "Rejected") {
                                rej++;
                            }
                             if (data.d[i].admision_status == "Pending") {
                                pend++;
                            }
                             if (data.d[i].submissionType == "resubmit") {
                                resub++;
                            }
                        }
                        //alert(newApp + "---" + amd + "---" + rej + "---" + pend);
                        $("#BindnewApp").append(newApp);
                        $("#BindamdApp").append(amd);
                        $("#BindrejApp").append(rej);
                        $("#BindpendApp").append(pend);
                        $("#BindReSub").append(resub);
                    },
                    error: function (result) {
                        //alert("Error......"); 
                    }
                });
            }

            //chart works
         function LoadChart(pending, approve, amend, reject) {
             $("#dvChart").html("");
             $("#dvLegend").html("");
             var status = new Array();
             var pend = parseInt(pending);
             var appro = parseInt(approve);
             var amen = parseInt(amend);
             var reje = parseInt(reject);

             var pending = {};
             pending.text = "Pending";
             pending.value = pend;
             pending.color = "orange";
             status.push(pending);

             var approve = {};
             approve.text = "Approve";
             approve.value = appro;
             approve.color = "green";
             status.push(approve);

             var amend = {};
             amend.text = "Amend";
             amend.value = amen;
             amend.color = "yellow";
             status.push(amend);

             var reject = {};
             reject.text = "Rejected";
             reject.value = reje;
             reject.color = "red";
             status.push(reject);

             var el = document.createElement('canvas');
             $("#dvChart")[0].appendChild(el);

             //Fix for IE 8
             if ($.browser.msie && $.browser.version == "8.0") {
                 G_vmlCanvasManager.initElement(el);
             }
             var ctx = el.getContext('2d');
             var chart = new Chart(ctx).Pie(status);

             for (var i = 0; i < status.length; i++) {
                 var div = $("<div />");
                 div.css("margin-bottom", "10px");
                 div.html("<span style = 'display:inline-block;height:10px;width:10px;background-color:" + status[i].color + "'></span> " + status[i].text);
                 $("#dvLegend").append(div);
             }
         }
    </script>
    <!--Chart References-->


  </body>
</html>
